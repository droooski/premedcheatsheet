// src/styles/main.scss
@use './variables' as *;
@use './mixins' as mix;

// Import Google Fonts after @use statements
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Playfair+Display:wght@400;600;700&display=swap');

// Base styles
* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

html {
  font-size: 16px;
  
  // Scale base font size based on viewport width - CRITICAL for proper content scaling
  @media (min-width: $lg) {
    font-size: 17px;
  }
  
  @media (min-width: $xl) {
    font-size: 18px;
  }
  
  @media (min-width: $xxl) {
    font-size: 19px;
  }
  
  @media (min-width: $xxxl) {
    font-size: 20px;
  }
  
  @media (max-width: $sm) {
    font-size: 15px;
  }
}

body {
  font-family: $font-family-sans;
  color: $text-color;
  background-color: $background-color;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  line-height: 1.5;
  overflow-x: hidden; // Prevent horizontal scrolling
}

h1, h2, h3.serif {
  font-family: $font-family-serif;
}

button {
  cursor: pointer;
  font-family: inherit;
  border: none;
  outline: none;
  
  &:focus {
    outline: none;
  }
}

a {
  text-decoration: none;
  color: inherit;
}

img {
  max-width: 100%;
  height: auto;
  display: block;
}

// ENHANCED CONTAINER SYSTEM - Critical for proper content scaling on large screens
.container {
  width: 100%;
  max-width: 100%;
  margin: 0 auto;
  padding: 0 $spacing-4;
  
  // Progressively expanded container with proper horizontal padding
  @media (min-width: $sm) {
    max-width: 92%;  // Utilize more screen space on small screens
    padding: 0 $spacing-6;
  }
  
  @media (min-width: $md) {
    max-width: 90%;  // Utilize more screen space on medium screens
    padding: 0 $spacing-8;
  }
  
  @media (min-width: $lg) {
    max-width: 88%;  // Proportional scaling on larger screens
    padding: 0 $spacing-8;
  }
  
  @media (min-width: $xl) {
    max-width: 84%;  // Wider content on extra-large screens
  }
  
  @media (min-width: $xxl) {
    max-width: 80%;  // Maximum width constraint on ultra-wide screens
  }
  
  @media (min-width: $xxxl) {
    max-width: $container-max;  // Fixed maximum width for extreme screens
  }
}

// Specialized container for profile sections - wider to accommodate profiles
.profile-container {
  @extend .container;
  
  @media (min-width: $xl) {
    max-width: 92%;  // Even wider for profile displays
  }
  
  @media (min-width: $xxl) {
    max-width: 88%;  // Maximize profile visibility on large screens
  }
}

// Centered narrow container for text-focused sections
.narrow-container {
  @extend .container;
  
  @media (min-width: $md) {
    max-width: 80%;  // Narrower for readability
  }
  
  @media (min-width: $lg) {
    max-width: 70%;  // Optimal reading width
  }
  
  @media (min-width: $xl) {
    max-width: 60%;  // Maintain comfortable reading width
  }
}

// Utility classes
.text-center {
  text-align: center;
}

// Enhanced margin utilities with responsive scaling
.mb-1 { margin-bottom: $spacing-1; }
.mb-2 { margin-bottom: $spacing-2; }
.mb-4 { margin-bottom: $spacing-4; }
.mb-6 { margin-bottom: $spacing-6; }
.mb-8 { margin-bottom: $spacing-8; }

.mt-1 { margin-top: $spacing-1; }
.mt-2 { margin-top: $spacing-2; }
.mt-4 { margin-top: $spacing-4; }
.mt-6 { margin-top: $spacing-6; }
.mt-8 { margin-top: $spacing-8; }

// Responsive margin utilities that scale with screen size
@media (min-width: $lg) {
  .mb-lg-8 { margin-bottom: $spacing-8; }
  .mb-lg-12 { margin-bottom: $spacing-12; }
  .mb-lg-16 { margin-bottom: $spacing-16; }
  
  .mt-lg-8 { margin-top: $spacing-8; }
  .mt-lg-12 { margin-top: $spacing-12; }
  .mt-lg-16 { margin-top: $spacing-16; }
}

// Animations
@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes slideUp {
  from { transform: translateY(20px); opacity: 0; }
  to { transform: translateY(0); opacity: 1; }
}

.fade-in {
  animation: fadeIn 0.5s ease-in-out;
}

.slide-up {
  animation: slideUp 0.5s ease-out;
}

// =========================================
// NEW FIXES FOR HERO IMAGE POSITIONING
// =========================================

// Ensure sections are properly stacked
.home-page {
  position: relative;
  
  > section {
    position: relative;
  }
}

// Fix for Safari and other browsers to ensure proper positioning
@supports (-webkit-touch-callout: none) {
  /* Safari specific fix */
  .hero {
    padding-bottom: 350px !important;
    
    .hero-image-container {
      position: absolute !important;
      bottom: -150px !important;
    }
  }
  
  .roadmap {
    padding-top: 200px !important;
    margin-top: 100px !important;
  }
}

// Special Firefox fix
@-moz-document url-prefix() {
  .hero {
    padding-bottom: 320px;
  }
  
  .hero-image-container {
    bottom: -140px;
  }
}

// Ensure section spacing stays consistent
.roadmap + section {
  position: relative;
  z-index: 1;
}

// Override any conflicting styles
.hero .hero-image-container {
  position: absolute !important;
  z-index: 10 !important;
}

// Ensure the next section maintains proper positioning
section + section {
  position: relative;
  z-index: 1;
}

// Additional helper classes for section spacing and overlap
.section-overlap {
  position: relative;
  z-index: 1;
  margin-top: -100px;
  
  @media (min-width: $xl) {
    margin-top: -150px;
  }
  
  @media (max-width: $md) {
    margin-top: -80px;
  }
  
  @media (max-width: $sm) {
    margin-top: -60px;
  }
}

// Fix for proper layering of overlapping content
.z-higher {
  position: relative;
  z-index: 5;
}

.z-highest {
  position: relative;
  z-index: 10;
}

// Fix for image positioning consistency
.fixed-position {
  position: absolute !important;
}

// Prevent main content jumps during loading
.content-stable {
  min-height: 100vh;
}

// Fix for proper position on Mobile Safari
@media not all and (min-resolution:.001dpcm) { 
  @supports (-webkit-appearance:none) {
    .hero-image-container {
      position: absolute !important;
      transform: translateX(-50%) !important;
    }
  }
}

// Ensure padding consistency when scrolling
html.scroll-smooth {
  scroll-behavior: smooth;

  /* Add padding to scroll targets to account for sticky header */
  [id] {
    scroll-margin-top: 80px;
  }
}

// Fix for image rendering in Safari
.hero-image {
  -webkit-transform: translateZ(0);
  transform: translateZ(0);
  backface-visibility: hidden;
  -webkit-backface-visibility: hidden;
}

// =========================================
// STRONG HERO IMAGE RESPONSIVE SIZING FIX - ADD THIS TO THE END OF YOUR FILE
// =========================================

/* Force responsive sizing for the hero image */
.hero .hero-image-container,
.hero-image-container {
  position: absolute !important;
  left: 50% !important;
  transform: translateX(-50%) !important;
  z-index: 999 !important; /* Extremely high z-index to ensure it's on top */
  width: 95vw !important; /* Using viewport width units directly - almost full width on mobile */
  min-width: 300px !important;
  max-width: none !important; /* Remove any max-width constraints initially */
  
  @media (min-width: 500px) {
    width: 90vw !important; /* 90% viewport width for small screens */
    bottom: -80px !important;
  }
  
  @media (min-width: 768px) {
    width: 80vw !important; /* 80% viewport width for medium screens */
    bottom: -120px !important;
    max-width: 1000px !important; /* Maximum width for medium screens */
  }
  
  @media (min-width: 1200px) {
    width: 70vw !important; /* 70% viewport width for large screens */
    bottom: -150px !important;
    max-width: 1200px !important; /* Maximum width for large screens */
  }
  
  @media (min-width: 1600px) {
    width: 60vw !important; /* 60% viewport width for extra large screens */
    bottom: -180px !important;
    max-width: 1400px !important; /* Maximum width for extra large screens */
  }
}

/* Refined shadow effect - light on sides, strong on bottom */
.hero .hero-image-container img,
.hero-image-container img,
.hero-image {
  width: 100% !important;
  height: auto !important;
  object-fit: contain !important;
  border-radius: 12px !important;
  
  /* Even shadow all around, stronger on bottom */
  box-shadow: 
    0 2px 8px rgba(0, 0, 0, 0.08),
    0 4px 12px rgba(0, 0, 0, 0.12),
    0 8px 20px rgba(0, 0, 0, 0.15),
    0 16px 36px rgba(0, 0, 0, 0.2) !important;
  
  position: relative !important;
  z-index: 1 !important;
}

/* Full width bottom shadow using a proper rectangle gradient */
.hero-image-container::after {
  content: "" !important;
  position: absolute !important;
  left: 0 !important;  /* Full width */
  right: 0 !important; /* Full width */
  bottom: -40px !important;
  height: 80px !important;
  /* Linear gradient fading downward */
  background: linear-gradient(to bottom, rgba(0,0,0,0.15) 0%, rgba(0,0,0,0) 100%) !important;
  filter: blur(20px) !important;
  z-index: -1 !important;
  
  @media (min-width: 768px) {
    bottom: -50px !important;
    height: 150px !important;
  }
  
  @media (min-width: 1200px) {
    bottom: -60px !important;
    height: 220px !important;
  }
}

/* Additional style to ensure the footer or next section doesn't have a gray top */
.roadmap, section + section {
  background: #fff !important;
  border-top: none !important;
}

/* Fix for any other conflicting styles */
html body .hero {
  overflow: visible !important;
  
  @media (max-width: 767px) {
    padding-bottom: 400px !important; /* Ensure enough bottom padding on mobile */
  }
  
  @media (min-width: 768px) {
    padding-bottom: 550px !important; /* More bottom padding on larger screens */
  }
  
  @media (min-width: 1200px) {
    padding-bottom: 800px !important; /* Even more bottom padding on large screens */
  }
  
  @media (min-width: 1600px) {
    padding-bottom: 800px !important; /* Maximum padding on extra large screens */
  }
}

// =========================================
// BIZ UDPMINCHO FONT FOR ROADMAP HEADERS
// =========================================

/* Target the headers in the roadmap section */
.roadmap .text-content h2,
.roadmap h2 {
  font-family: $font-family-mincho !important; /* Apply BIZ UDPMincho font */
  font-weight: 400 !important; /* Regular weight */
  
  /* Refined styling for this elegant font */
  letter-spacing: 0.01em !important;
  line-height: 1.3 !important;
  
  /* Ensure good spacing around the header */
  margin-bottom: $spacing-6 !important;
  
  /* Responsive adjustments */
  @media (min-width: 768px) {
    letter-spacing: 0.015em !important; /* Slightly more spacing on larger screens */
  }
  
  @media (min-width: 1200px) {
    letter-spacing: 0.02em !important; /* More refined spacing on large screens */
  }
}

/* Optional: Apply to all headings in the roadmap section */
.roadmap h1, 
.roadmap h3, 
.roadmap h4, 
.roadmap h5, 
.roadmap h6 {
  font-family: $font-family-mincho !important;
  font-weight: 400 !important;
}

// Add this to your main.scss file to style paragraph text in the roadmap section

// =========================================
// ROADMAP PARAGRAPH TEXT STYLING
// =========================================

/* Style the paragraph text in the roadmap section */
.roadmap .text-content p,
.roadmap p {
  /* Font properties */
  font-family: $font-family-sans !important; /* Keep sans-serif for body text */
  font-weight: 400 !important; /* Regular weight for readability */
  font-size: 0.9rem !important; /* Comfortable reading size */
  line-height: 1.6 !important; /* Improved line height for readability */
  
  /* Spacing and color */
  margin-bottom: $spacing-4 !important; /* Good spacing between paragraphs */
  color: $text-color-light !important; /* Slightly lighter color for contrast with headers */
  
  /* Subtle refinements */
  letter-spacing: 0.01em !important; /* Very slight letter spacing improvement */
  
  /* Last paragraph has no bottom margin */
  &:last-of-type {
    margin-bottom: 0 !important;
  }
  
  /* Responsive adjustments */
  @media (min-width: 768px) {
    font-size: 0.9rem !important; /* Slightly larger on medium screens */
  }
  
  @media (min-width: 1200px) {
    font-size: 1rem !important; /* Larger on big screens */
    line-height: 1.7 !important; /* More generous line height on big screens */
  }
  
  @media (max-width: 576px) {
    font-size: 0.65rem !important; /* Slightly smaller on mobile */
    line-height: 1.5 !important; /* Tighter line height on mobile */
  }
}

/* Create a pleasing visual hierarchy between headers and paragraphs */
.roadmap .text-content {
  /* Add subtle spacing between header and first paragraph */
  h2 + p {
    margin-top: $spacing-2 !important;
  }
  
  /* Add better spacing between groups of content */
  p + h2,
  p + h3 {
    margin-top: $spacing-6 !important;
  }
}

// =========================================
// MED SCHOOL CODE SECTION STYLING
// =========================================

/* Target the med-school-code section */
.med-school-code {
  h2 {
    font-family: $font-family-mincho !important; /* Apply BIZ UDPMincho font */
    font-weight: 400 !important; /* Regular weight */
    letter-spacing: 0.01em !important;
    line-height: 1.3 !important;
    margin-bottom: $spacing-6 !important;
  }
  
  p {
    font-family: $font-family-sans !important;
    font-weight: 400 !important;
    line-height: 1.6 !important;
    color: $text-color-light !important;
    margin-bottom: $spacing-4 !important;
    
    @media (min-width: 768px) {
      font-size: 1.05rem !important;
    }
    
    @media (min-width: 1200px) {
      font-size: 1.1rem !important;
      line-height: 1.7 !important;
    }
  }
}

// =========================================
// FIXED SPACING FOR SMALL TO MEDIUM SCREENS
// =========================================

/* Fix profile cards with correct aspect ratios */
.all-in-one {
  /* Apply BIZ UDPMincho font to headings */
  h2 {
    font-family: $font-family-mincho !important;
    font-weight: 400 !important;
    letter-spacing: 0.01em !important;
  }
  
  .section-subheading {
    font-family: $font-family-sans !important;
    font-weight: 400 !important;
    color: $text-color-light !important;
  }
  
  /* CRITICAL FIX: Adjusted spacing for small to medium screens */
  .profile-cards-grid {
    display: grid !important;
    grid-template-columns: 1fr !important;
    width: 90% !important;
    max-width: 500px !important;
    margin: 0 auto !important;
    
    /* FIXED: Proper vertical gap for mobile */
    gap: 1px !important; /* Using explicit pixel value for predictability */
    
    @media (min-width: $md) {
      grid-template-columns: repeat(2, 1fr) !important;
      max-width: 800px !important;
      
      /* FIXED: Smaller gap on medium screens */
      gap: 1px !important; /* Less spacing on tablet */
    }
    
    @media (min-width: $lg) {
      max-width: 800px !important;
      gap: $spacing-1 !important; /* Normal spacing on large screens */
    }
    
    @media (min-width: $xl) {
      max-width: 1000px !important;
      gap: $spacing-16 !important; /* Moderate spacing on XL screens */
    }
  }
  
  /* ASPECT RATIO FIX */
  .profile-card-with-image {
    /* Use the exact aspect ratios specified */
    aspect-ratio: 3/3.45 !important; /* Default aspect ratio */
    overflow: hidden !important;
    border-radius: 18px !important;
    transform: scale(0.8) !important;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.08) !important;
    transition: transform 0.3s ease, box-shadow 0.3s ease !important;
    
    /* Subtle hover effect */
    &:hover {
      transform: scale(0.81) !important; /* Just slightly larger */
      box-shadow: 0 6px 15px rgba(0, 0, 0, 0.1) !important;
    }
    
    @media (min-width: $md) {
      aspect-ratio: 13.29/15.2 !important; /* Slightly taller on medium screens */
      
      &:hover {
        transform: scale(0.81) !important; /* Subtle hover */
      }
    }
    
    @media (min-width: $lg) {
      aspect-ratio: 15/17.3 !important; /* More vertical on large screens */
      border-radius: 15px !important; /* Rounded corners */
    }
    
    @media (min-width: $xl) {
      aspect-ratio: 19/22 !important; /* Taller aspect ratio for XL */
      transform: scale(1.08) !important; /* Make slightly larger */
      
      &:hover {
        transform: scale(1.10) !important; /* Moderate hover effect */
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15) !important;
      }
    }
    
    .image-container {
      width: 100% !important;
      height: 100% !important;
      
      img {
        width: 100% !important;
        height: 100% !important;
        object-fit: contain !important; /* Show full image without cropping */
        
        @media (min-width: $xl) {
          /* Optional: Subtle enhancement for XL images */
          filter: drop-shadow(0 4px 6px rgba(0,0,0,0.1)) !important;
        }
      }
    }
  }
}